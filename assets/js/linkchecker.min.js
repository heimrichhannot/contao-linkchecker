(function(){var a;function a(c,b){this.element=c;this.options=b;this.url=this.element.getAttribute("data-url");this.element.linkchecker=this;if(this.element.getAttribute("data-target")){this.target=document.querySelector(this.element.getAttribute("data-target"))}if(this.target=="undefined"){return false}if(!this.url){this.url=window.location.href}var d={};this.url.replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(e,f,g){d[f]=g!==undefined?g:""});this.params=d;this.init()}a.prototype.init=function(){this.test()};a.prototype.test=function(){var b;b=new XMLHttpRequest();method="post";url=this.element.getAttribute("data-url");b.open(method,url,true);b.withCredentials=!!this.options.withCredentials;response=null;handleError=(function(c){return function(){return false}})(this);updateProgress=(function(c){return function(d){}})(this);b.onload=(function(c){return function(f){var d;if(b.readyState!==4){return}response=b.responseText;if(b.getResponseHeader("content-type")&&~b.getResponseHeader("content-type").indexOf("application/json")){try{response=JSON.parse(response)}catch(g){f=g;response="Invalid JSON response from server."}}if(!((200<=(d=b.status)&&d<300))){return handleError()}else{return c._finished(response,f)}}})(this);b.onerror=(function(c){return function(){return handleError()}})(this);progressObj=(_ref=b.upload)!=null?_ref:b;progressObj.onprogress=updateProgress;headers={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){extend(headers,this.options.headers)}for(headerName in headers){headerValue=headers[headerName];if(headerValue){b.setRequestHeader(headerName,headerValue)}}formData=new FormData();if(this.params){_ref1=this.params;for(key in _ref1){value=_ref1[key];formData.append(key,value)}}return this.submitRequest(b,formData)};a.prototype.submitRequest=function(c,b){return c.send(b)};a.prototype._finished=function(b,c){if(b.result=="undefined"||b.result.html=="undefined"){return false}this.target.innerHTML=b.result.html};LinkCheckerRegistry={init:function(){this.register()},register:function(){var f=document.querySelectorAll("[data-linkchecker]");for(var e=0,b=f.length;e<b;e++){var d=f[e],c={};if(typeof d.linkchecker!="undefined"){continue}new a(d,c)}}};if(window.jQuery){jQuery(document).ready(function(){LinkCheckerRegistry.init()});jQuery(document).ajaxComplete(function(){LinkCheckerRegistry.init()})}if(window.MooTools){window.addEvent("domready",function(){LinkCheckerRegistry.init()});window.addEvent("ajax_change",function(){LinkCheckerRegistry.init()})}}).call(this);